---
# internal.vmware.common : assert_connection
# Ensures the vCenter API is reachable before proceeding with API-based roles.

- name: Assert vCenter Connection
  ansible.builtin.assert:
    that:
      - vmware_ctx.discovery.connection.hostname is defined
      - vmware_ctx.discovery.connection.reachable | default(false) | bool
    fail_msg: "ERROR: vCenter connection not established. Run 'vc_connection_init' first."
    quiet: true
