---
# Export Datastore Capacity
- name: Export datastore capacity report
  ansible.builtin.include_role:
    name: internal.core.reporting
    tasks_from: export_csv
  vars:
    _ds: "{{ vmware_ctx.inventory.datastores.list | default([]) }}"
    ncs_csv_report_name: "datastores_capacity"
    ncs_csv_headers: ["vCenter", "Datastore", "Type", "Capacity (GB)", "Free (GB)", "Free (%)", "Used (%)", "Status", "Accessible", "Maintenance Mode"]
    ncs_csv_keys: ["vcenter", "name", "type", "capacity_gb", "free_gb", "free_pct", "used_pct", "status", "accessible", "maintenance_mode"]
    ncs_csv_data: "{{ _ds }}"
    ncs_csv_sort_by: "free_pct"
