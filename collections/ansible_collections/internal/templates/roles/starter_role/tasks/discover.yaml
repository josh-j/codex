---
# Gather facts from the platform.
# ALWAYS use 'check_mode: false' for read-only gathering tasks.

- name: "[{{ starter_platform_name }}] Gather system facts"
  ansible.builtin.set_fact:
    _starter_raw_facts:
      hostname: "{{ inventory_hostname }}"
      os_family: "{{ ansible_os_family | default('Unknown') }}"
      uptime: "10 days" # Placeholder
  check_mode: false

- name: "[{{ starter_platform_name }}] Normalize facts into ops structure"
  ansible.builtin.set_fact:
    ncs: "{{ ops | combine(normalized_data, recursive=True) }}"
  vars:
    normalized_data:
      "{{ starter_platform_name }}":
        facts:
          host: "{{ _starter_raw_facts.hostname }}"
          uptime: "{{ _starter_raw_facts.uptime }}"
        status: "DISCOVERED"
