---
# playbooks/ubuntu/ops.yaml
# Perform deep system audit for Ubuntu Linux infrastructure.

- name: Ubuntu System Audit
  hosts: "{{ ubuntu_target_hosts | default('ubuntu_servers') }}"
  gather_facts: true

  pre_tasks:
    - name: Setup Role Context
      ansible.builtin.import_tasks: ../common/setup_host_ctx.yaml

    - name: Bind Linux Domain Context
      ansible.builtin.include_role:
        name: internal.linux.common
        tasks_from: sync_ctx
      tags: [always]

  roles:
    - role: internal.core.stig
    - role: internal.linux.ubuntu_system_audit
