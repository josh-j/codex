---
# collections/ansible_collections/internal/vmware/roles/audit/defaults/main.yaml
#
# Default values for the vmware.audit role.
#
# Credentials and connection are NOT defined here. They live as flat vars:
#   vmware_username, vmware_password, vmware_validate_certs  (group_vars/vcenters.yaml)
#
# Thresholds and toggles below can be overridden at group_vars, host_vars,
# or play level.

# --- Output / Report Bounding ---
# Limit how many items we embed in affected_items for any single alert.
# Prevents huge YAML/HTML outputs in large environments.
vmware_alert_items_max: 25

# Per-check overrides (fall back to vmware_alert_items_max if unset)
vmware_alarm_items_max: "{{ vmware_alert_items_max }}"
vmware_snapshot_items_max: "{{ vmware_alert_items_max }}"
vmware_datastore_items_max: "{{ vmware_alert_items_max }}"
vmware_tools_items_max: 50 # VM lists can be large; slightly higher is often useful

# --- Alert Granularity Toggles ---
# If true, emit per-object alerts (e.g., one per datastore). If false, prefer rollups.
# Recommended false for large fleets; rollups scale better.
vmware_emit_per_object_storage_alerts: false

# If true, emit per-cluster capacity/compliance alerts; if false, emit only rollups.
vmware_emit_per_cluster_alerts: true

# --- Notifications ---
vmware_enable_email_notifications: false
vmware_owner_notification_days:
  - tuesday
  - thursday
vmware_notification_allowlist: []
vmware_notification_from: ""

# --- Capacity Thresholds ---
vmware_cpu_critical_pct: 90
vmware_cpu_warning_pct: 80

vmware_memory_critical_pct: 90
vmware_memory_warning_pct: 80

vmware_cluster_cpu_warning_pct: 90
vmware_cluster_mem_warning_pct: 90

vmware_datastore_free_critical_pct: 10
vmware_datastore_free_warning_pct: 15

# --- Snapshot Thresholds ---
vmware_snapshot_age_warning_days: 7
vmware_snapshot_size_warning_gb: 100

# --- Update Thresholds (if applicable) ---
vmware_updates_critical_threshold: 50
# --- Runtime State (set by init.yaml, not user-configured) ---
# _vcenter_hostname  - set once from vmware_hostname / ansible_host / inventory_hostname
# vmware_alerts      - accumulated during checks phase, starts as []
# vmware_ctx         - audit state, assembled during discovery phase
